<% layout('layout/boilerplate') -%> <%- include('../partials/flash') %>

<section>
  <div class="row products">
    <h4 class="display-4 bg-light p-3 rounded"><i class="fab fa-shopify" style="margin-right: 20px"></i>Shopping-Cart</h4>
    <%for(let product of products) {%>
    <div class="col-lg-3 col-md-6 mb-3">
      <div class="card shadow-sm mx-auto position-relative" style="width: 20rem">
        <img src="<%=product.img%>" class="card-img-top" alt="item image" />
        <!-- For Rating :- (product.avgRating)  i can use at the place of random function -->
        <span class="badge rounded-pill bg-light text-dark w-25 position-absolute translate-middle-y" style="top: 41%; left: 5%"
          ><%=Math.floor(Math.random() * 5+1)%> | 5</span
        >

        <div class="card-body">
          <h5 class="card-title d-flex justify-content-between align-items-center">
            <span><%= product.name %></span>
            <span class="btn like-button bg-light rounded-circle" product-id="<%=product._id%>" style="box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.26)">
              <% if(currentUser && currentUser.wishList.includes(product._id)){ %>
              <i class="fas fa-heart"></i>
              <% }else {%>
              <i class="far fa-heart"></i>
              <% } %>
            </span>
          </h5>
          <p class="card-text fw-light"><%= product.desc.substring(0,150)%></p>
          <h6 class="card-title">
            <%const off = 10*Math.floor(Math.random()*9 + 1)%>
            <span class="fw-lighter fs-6 text-decoration-line-through">$.<%= product.price %></span> $.<%=(off/100)* product.price %>
            <span class="fw-light fs-6 text-warning">( <%=100-off%>% OFF )</span>
          </h6>
          <a href="/products/<%=product._id%>" class="btn btn-sm show-btn">Buy Now</a>
        </div>
      </div>
    </div>
    <% } %>
  </div>
</section>

<script src="/js/common.js"></script>
